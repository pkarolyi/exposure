<div class="container">
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <%= link_to gallery_admin_path, class: 'navbar-brand' do %>
            <i class="fa fa-arrow-left" aria-hidden="true"></i> Galériák adminisztrációja
        <% end %>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><%= link_to 'Kijelentkezés', '#' %></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title"><%= @gallery.title %> Galéria szerkesztése</h3>
        </div>
        <div class="panel-body">
          <%= render 'layouts/flash' %>
          <%= form_for @gallery, html: {class: 'form-horizontal'} do |f| %>
              <% if @gallery.errors.any? then %>
                  <div class="alert alert-danger alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
                    <%= @gallery.errors[:is_shown].first %>
                  </div>
              <% end %>
              <div class="form-group">
                <%= f.label :title, 'Cím', class: 'col-sm-2 control-label' %>
                <div class="col-sm-6">
                  <%= f.text_field :title, class: 'form-control' %>
                </div>
                <div class="col-sm-2">
                  <div class="checkbox-inline">
                    <label>
                      <%= f.check_box :is_shown %> Főoldal?
                    </label>
                  </div>
                </div>
                <div class="col-sm-2">
                  <%= f.submit 'Frissítés', class: 'btn btn-default' %>
                </div>
              </div>
          <% end %>

          <%= form_for @gallery, url: gallery_images_path(@gallery), method: :post, html: {class: 'form-horizontal'} do |f| %>
              <div class="form-group">
                <%= f.label :images, 'Képek', class: 'col-sm-2 control-label' %>
                <div class="col-sm-8">
                  <%= f.file_field :images, multiple: true %>
                </div>
                <div class="col-sm-1">
                  <%= f.submit 'Új képek feltöltése', class: 'btn btn-success' %>
                </div>
              </div>
          <% end %>

          <div class="row">
            <% @gallery.images.each_with_index do |image, index| %>
              <div class="col-sm-3">
                <div class="well well-group text-center">
                  <%= image_tag image.thumb.url, class: 'img-responsive' %>
                  <%= link_to 'Törlés', gallery_image_path(@gallery, index), :method => :delete, class: 'btn btn-block btn-danger',
                              data: {confirm: '<p class="text-danger"><strong>Biztos törlöd?</strong> Ez a művelet nem visszavonható.</p>'.html_safe,
                                     commit: 'Törlés', cancel: 'Mégse'} %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>